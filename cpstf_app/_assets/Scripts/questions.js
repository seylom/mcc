var Questions = function () { var f = 0; var g = null; var h = ''; var i = '#output'; var j = ''; var k = null; var l = function (a) { a.unbind('click'); a.attr('title', 'You must be logged in to use this feature'); a.tipsy() }; var m = function (a) { j = 'Please <a href=' + a + '?returnurl=' + escape(document.location) + ' class="globalred">Login</a> or <a href=' + a + '?returnurl=' + escape(document.location) + ' class="globalred">Register</a> to vote' }; var n = function (a) { DisplayMessage("Message: Login", j) }; var o = function () { if ((typeof isAuthenticated !== "undefined") && isAuthenticated) { q() } else { s() } $('#postAnswerLnk').unbind('click').click(function () { $.scrollTo('#postyouranswer', 500) }) }; var q = function () { g = new serviceProxy(h); $('#q_up').unbind("click").click(function () { t() }); $('#q_down').unbind("click").click(function () { u() }); $("img[id^='answer_up_']").unbind("click").click(function () { var a = $(this).attr('id').substring('answer_up_'.length); v(a) }); $("img[id^='answer_down_']").unbind("click").click(function () { var a = $(this).attr('id').substr('answer_down_'.length); w(a) }); $('.acc').unbind("click").click(function () { var a = $(this).attr('id').substring('acc_'.length); x(a) }); $('#qrplnk').unbind('click').click(function () { $("#qcommentbx").slideToggle(150) }); $("form[name^='comment-form-']").bind("submit", function () { var a = $(this).attr('name').substr('comment-form-'.length); var p = $('#comment', $(this)); if (p) { var r = p.val().trim(); if (r) { F(a, r); p.val(""); $("#commentbx_" + a).fadeOut('slow') } } return false }); $("form[name='comment-form']").bind("submit", function () { if ($('#comment').val().trim() != "") { E($('#comment').val()); $('#comment').val(""); $("#qcommentbx").fadeOut('slow') } return false }); $("a[id^='arplnk_']").unbind('click').click(function () { var a = $(this).attr("id").substr('arplnk_'.length); $("#commentbx_" + a, "#answer_" + a).slideToggle(200) }); $(".flw").unbind('click').click(function () { K() }) }; var s = function () { $("img[id^='answer_up_']").unbind("click").click(function () { n() }); $("img[id^='answer_down_']").unbind("click").click(function () { n() }); $("#q_up").unbind("click").click(function () { n() }); $("#q_down").unbind("click").click(function () { n() }); $('.acc').unbind("click").click(function () { n() }); $('#btnPostAnswer').unbind('click').click(function () { n() }); $("a[id^='arplnk_']").unbind('click').click(function () { n() }); $("#qrplnk").unbind('click').click(function () { n() }); $("a[id^='aflag_']").unbind('click').click(function () { n() }); $("#qflag").unbind('click').click(function () { n() }); $('#postAnswerLnk').unbind('click').click(function () { n() }); l($(".qlnkauth"), 'You must be logged in to use this feature') }; var t = function () { if (f > 0) { var b = {}; g.invoke(f + '/VoteQuestionUp', b, z, function (a) { alert(a.message) }, true) } }; var u = function () { if (f > 0) { var b = {}; g.invoke(f + '/VoteQuestionDown', b, z, function (a) { alert(a.message) }, true) } }; var v = function (b) { var c = parseInt(b); if (c > 0) { var d = {}; g.invoke(c + '/VoteAnswerUp', d, A, function (a) { alert(a.message) }, true) } }; var w = function (b) { var c = parseInt(b); if (c > 0) { var d = {}; g.invoke(c + '/VoteAnswerDown', d, A, function (a) { alert(a.message) }, true) } }; var x = function (b) { var c = parseInt(b); if (c > 0) { var d = { 'questionId': f }; g.invoke(c + '/AcceptRejectAnswer', d, C, function (a) { alert(a.message) }, true) } }; var y = function (b) { if (f > 0) { var c = { 'Id': f, 'body': b }; g.invoke(f + '/PostAnswer', c, B, function (a) { alert(a.message) }, true) } }; var z = function (a) { if (a.Success == true) { $('#' + i).html(a.Data) } else { DisplayMessage('Question vote', a.Message) } }; var A = function (a) { if (a.Success == true) { $('#votes_' + a.Id).html(a.Data) } else { DisplayMessage('Answer vote', a.Message) } }; var B = function (a) { if ((a) && (a.length == 1)) { if (a[0] == 'True') { $('#txtAnswer').val('') } } }; var C = function (a) { if (a) { var b = a.Id; if (a.Success == true) { $('.answer').removeClass("rep").addClass("op"); $('#answer_' + a.Id).removeClass("op").addClass("rep"); $('.accbx').show(); $('.accbx', '#answer_' + a.Id).hide(); var c = $('#answer_' + a.Id); c.parent().prepend(c); $.scrollTo('#answers', 500) } else { $('.answer').removeClass("rep").addClass("op") } } else { } }; var D = function (a) { }; var E = function (b) { var c = { 'comment': b }; g.invoke(f + '/CommentQuestion', c, G, function (a) { alert(a.message) }) }; var F = function (b, c) { var d = parseInt(b); if (d > 0) { var e = { 'Id': d, 'comment': c }; g.invoke(d + '/CommentAnswer', e, H, function (a) { alert(a.message) }) } }; var G = function (a) { if (a.Success) { var b = I(a); $('#qcomment-lst').append(b) } else { } }; var H = function (a) { if (a.Success) { var b = I(a); $('#acomment-lst-' + a.Id).append(b) } else { } }; var I = function (a) { return $('<div style="font-size: 10px; margin: 3px 0px; border-top: 1px dotted #b8cae8;">' + '<table style="width: 100%">' + '<tr>' + '<td>' + a.Body + '</td><td style="width: 50px;">' + '<a  class="global" href="/users/' + a.AddedBy + '" >' + a.AddedBy + '</a>' + '</td>' + '</tr>' + '</table>' + '</div>') }; var J = function (a) { }; var K = function () { if (f > 0) { var c = { 'Id': f }; g.invoke(f + '/Follow', c, function (a) { var b = "#qu_" + f; if (a) { $(".flw", b).removeClass("f_off"); $(".flw", b).addClass("f_on"); $(".flw", b).html("following") } else { $(".flw", b).removeClass("f_on"); $(".flw", b).addClass("f_off"); $(".flw", b).html("follow") } }, function (a) { alert(a.message) }, true) } }; return { Init: function (a, b, c, d) { f = a; h = c; i = d; m(b); o() } } } ();